# Python远程调试器

交互式网页调试工具，帮助开发者在断点处快速验证代码修复方案。

## 功能特性
- 🚀 保留断点处的完整执行上下文
- ✨ React前端提供现代化UI体验
- 📚 支持最近20条执行历史追溯（带时间戳）
- 🌙 亮色/暗色主题切换（自动保存偏好）
- ⭐ 代码片段收藏功能（支持命名和描述）
- 📡 支持REST API调用
- 🖥️ 响应式布局适配所有设备
- ⌨️ 键盘快捷键支持 (Ctrl+Enter执行代码)
- 💾 所有用户偏好自动保存
- 🧪 单元测试支持

## 新功能亮点
1. **专业代码编辑器**：
   - Monaco Editor提供类似VSCode的编辑体验
   - Python语法高亮和智能提示
   - 主题自适应

2. **增强历史管理**：
   - 可展开/折叠历史条目
   - 一键复制历史代码
   - 清除历史记录功能

3. **收藏片段增强**：
   - 命名收藏片段
   - 添加描述信息
   - 快速应用收藏代码
   - 便捷管理收藏

4. **错误处理优化**：
   - 清晰的错误提示
   - 执行状态反馈
   - 结果分屏显示
   - 详细错误信息

5. **响应式布局**：
   - 适配桌面和移动设备
   - 智能调整UI组件布局
   - 优化小屏幕体验

## 使用方法

### 启动调试服务器
在Python代码中需要调试的位置添加：
```python
import remote_eval
remote_eval.run(port=5678)  # 端口号可选
```

执行效果：
1. 获取当前执行帧作为上下文环境
2. 启动HTTP调试服务器
3. 打印服务器访问地址
4. 按Ctrl+C停止服务器

### 前端调试
```bash
cd front
pnpm install
pnpm run build
```

### 使用示例
1. 访问前端界面：`http://localhost:5678`
2. 在代码编辑器中输入Python代码
3. 按`Ctrl+Enter`执行代码
4. 查看右侧执行结果面板
5. 添加收藏：
   - 输入收藏名称
   - (可选)添加描述
   - 点击"添加收藏"按钮
6. 管理历史记录：
   - 查看执行历史
   - 展开/折叠详情
   - 清除历史记录

### API调用
```bash
# 测试API
./test_api.sh

# 手动调用示例
curl -X POST http://localhost:5000/evaluate \
  -H "Content-Type: application/json" \
  -d '{"code": "print(2 + 2)"}'

# 预期响应: {"result": "4"}

# 错误响应示例:
# {"error": "Traceback (most recent call last): ..."}
```

## 开发指南

### 前端调试
```bash
cd front
pnpm install
pnpm run build
```

### 上下文绑定说明
当通过`remote_eval.run()`启动调试器时：
- 自动捕获当前执行帧作为上下文
- 所有代码执行都在原始上下文中进行
- 变量修改会直接影响原始执行环境
- 支持在断点处实时调试和修改变量

### 注意事项
1. 确保前端已构建（`front/dist`内容复制到`static`目录）
2. 调试服务器会阻塞当前线程（Ctrl+C可退出）
3. 生产环境请勿使用（仅用于调试目的）